import{v as f,n as u}from"./vendor.41c6d5da.js";const p=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const n of t.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function s(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?t.credentials="include":e.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function r(e){if(e.ep)return;e.ep=!0;const t=s(e);fetch(e.href,t)}};p();function g(c={}){const{immediate:i=!1,onNeedRefresh:s,onOfflineReady:r,onRegistered:e,onRegisterError:t}=c;let n,l;const d=async(o=!0)=>{o&&(n==null||n.addEventListener("controlling",a=>{a.isUpdate&&window.location.reload()})),l&&l.waiting&&await u(l.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){n=new f("http://geek5.cn/electronic-scale-demo/sw.js",{scope:"http://geek5.cn/electronic-scale-demo/"}),n.addEventListener("activated",o=>{o.isUpdate||r==null||r()});{const o=()=>{s==null||s()};n.addEventListener("waiting",o),n.addEventListener("externalwaiting",o)}n.register({immediate:i}).then(o=>{l=o,e==null||e(o)}).catch(o=>{t==null||t(o)})}return d}const m=g({onNeedRefresh:()=>{UIkit.modal.confirm("\u662F\u5426\u66F4\u65B0\u7CFB\u7EDF",{labels:{ok:"\u786E\u8BA4",cancel:"\u53D6\u6D88"}}).then(function(){m()},function(){console.log("\u53D6\u6D88\u66F4\u65B0.")})}});var h=UIkit;export{h as U};
